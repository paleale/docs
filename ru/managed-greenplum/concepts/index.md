---
title: Взаимосвязь ресурсов сервиса
description: Из статьи вы узнаете про взаимосвязь ресурсов сервиса.
---

# Взаимосвязь ресурсов сервиса


Основная сущность, которой оперирует сервис {{ mgp-name }} — _[кластер](../../glossary/cluster.md) баз данных_.

Каждый кластер состоит из хостов баз данных — виртуальных машин с развернутыми серверами СУБД. Кластер {{ mgp-name }} включает:

* два _хоста-мастера_;
* два или больше _хостов-сегментов_.

_Первичный_ хост-мастер (PRIMARY) принимает клиентские подключения и SQL-запросы, распределяет их обработку по хостам-сегментам.

_Резервный_ хост-мастер (STANDBY) непрерывно реплицирует данные первичного, но пользовательские подключения не принимает.

В случае выхода первичного мастера из строя резервный берет его функции на себя. Таким образом, кластер с двумя хостами-мастерами в случае отказа одного из них продолжает обрабатывать запросы.

На хостах-сегментах развернуты самостоятельные СУБД (_сегменты_), которые хранят части данных и исполняют большинство операций по обработке запросов. Каждый сегмент в кластере имеет одну реплику — зеркальный сегмент, который находится на другом хосте и хранит копию данных с основного сегмента.

Количество сегментов на каждом хосте одинаково. При [расширении кластера](../operations/cluster-expand.md) можно увеличить количество сегментов. Они будут добавлены на все хосты — как новые, так и существующие. Нельзя добавить сегменты на существующие хосты без расширения кластера.



Хосты кластера {{ mgp-name }} представляют собой [виртуальные машины](../../glossary/vm.md) в облаке. Такие виртуальные машины могут размещаться:

* На _стандартных хостах_ {{ yandex-cloud }}.

    Это общие физические серверы для размещения виртуальных машин кластера. Такие хосты выбираются случайным образом из пула доступных хостов, удовлетворяющих выбранной конфигурации кластера.

* На _выделенных хостах_ {{ yandex-cloud }}.

    Это физические серверы для размещения исключительно ваших виртуальных машин. ВМ на выделенных хостах обладают всеми возможностями обычных ВМ. Дополнительно они получают физическую изоляцию от ВМ других пользователей и доступ ко всему объему локальных дисков физического сервера.

    Выделенные хосты выбираются из _групп выделенных хостов_, указанных при создании кластера. Группа выделенных хостов должна быть предварительно [создана](../../compute/operations/dedicated-host/create-host-group.md) в сервисе {{ compute-full-name }}.

    Подробнее см. в разделе [{#T}](../../compute/concepts/dedicated-host.md).


Все хосты кластера {{ mgp-name }} размещаются в одной зоне доступности: `{{ region-id }}-a`, `{{ region-id }}-b` или `{{ region-id }}-d`.

При создании кластера необходимо указывать:

* _Класс хостов_ — шаблон, по которому будут развертываться хосты кластера. Список доступных классов и их характеристики см. в разделе [Классы хостов](instance-types.md).

* _Окружение_ — среду, в которой будет развертываться кластер:
    * `PRODUCTION` — для стабильных версий ваших приложений.
    * `PRESTABLE` — для тестирования. Prestable-окружение аналогично Production-окружению и на него также распространяется SLA, но при этом на нем раньше появляются новые функциональные возможности, улучшения и исправления ошибок. В Prestable-окружении вы можете протестировать совместимость новых версий с вашим приложением.

{% include [monitoring-access](../../_includes/mdb/monitoring-access.md) %}

{% include [greenplum-trademark](../../_includes/mdb/mgp/trademark.md) %}
